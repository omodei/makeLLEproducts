#!/usr/bin/env python
import os

GRBS= {
    'GRB080824909':[28.672, 241307335.727706, 122.400, -2.80000, 0.0, 1.0, -1.0, 100, 80],
    'GRB100724029':[100.347, 301624927.991530, 124.160, 74.4200, 0.0, 1.0, -1.0, 100, 80],
    'GRB100131730':[3.453, 286651859.670194, 120.390, 16.4900, 0.0, 1.0, -1.0, 100, 80],
    'GRB090514006':[12.288, 263952521.156988, 12.3000, -10.9000, 0.0, 1.0, -1.0, 100, 80],
    'GRB100225580':[4.605, 288798933.343136, 314.270, 0.210000, 0.0, 1.0, -1.0, 100, 80],
    'GRB101227536':[17.408, 315147108.193000, 150.870, -49.4400, 0.0, 1.0, -1.0, 100, 80],
    'GRB100122616':[29.694, 285864459.314122, 79.2000, -2.71000, 0.0, 1.0, -1.0, 100, 80],
    'GRB091208410':[16.384, 281958599.955990, 29.3920, 16.8900, 0.0, 1.0, -1.0, 100, 80],
    'GRB091031500':[45.057, 278683230.845960, 70.5800, -59.0800, 0.0, 1.0, -1.0, 100, 80],
    'GRB091120191':[53.246, 280384482.229748, 226.810, -21.7900, 0.0, 1.0, -1.0, 100, 80],
    'GRB101206036':[9.216, 313289539.530058, 164.080, -38.1100, 0.0, 1.0, -1.0, 100, 80],
    'GRB101227406':[10.493, 315135908.568326, 240.500, -24.5000, 0.0, 1.0, -1.0, 100, 80],
    'GRB091221870':[34.814, 283121579.216990, 55.7980, 23.2400, 0.0, 1.0, -1.0, 100, 80],
    'GRB100225115':[16.384, 288758733.146798, 310.300, -59.4000, 0.0, 1.0, -1.0, 100, 80],
    'GRB101014175':[27.65, 308722314.621822, 26.9400, -51.0700, 0.0, 1.0, -1.0, 100, 80],
    'GRB090612619':[6.142, 266511052.493974, 81.0300, 17.7100, 0.0, 1.0, -1.0, 100, 80],
    'GRB081223419':[2.048, 251719438.147648, 112.500, 33.2000, 0.0, 1.0, -1.0, 100, 80],
    'GRB090131090':[57.345, 255060563.149072, 352.300, 21.2000, 0.0, 1.0, -1.0, 100, 80],
    'GRB091109895':[6.144, 279494922.012140, 247.720, 42.3100, 0.0, 1.0, -1.0, 100, 80],
    'GRB091127976':[14.078, 281057147.482960, 36.5830, -18.9520, 0.0, 1.0, -1.0, 100, 80],
    'GRB090829672':[94.21, 273254860.864052, 329.200, -34.2000, 0.0, 1.0, -1.0, 100, 80],
    'GRB080906212':[2.684, 242370312.546850, 182.800, -6.40000, 0.0, 1.0, -1.0, 100, 80],
    'GRB090129880':[16.384, 254956037.425624, 269.000, -32.8000, 0.0, 1.0, -1.0, 100, 80],
    'GRB101126198':[25.597, 312439469.477320, 84.7700, -22.5500, 0.0, 1.0, -1.0, 100, 80],
    'GRB090528516':[61.441, 265206153.286424, 312.200, 32.7000, 0.0, 1.0, -1.0, 100, 80],
    'GRB100328141':[1.758, 291439366.604928, 155.940, 47.0300, 0.0, 1.0, -1.0, 100, 80],
    'GRB080925775':[38.14, 244060556.996948, 96.1000, 18.2000, 0.0, 1.0, -1.0, 100, 80],
    'GRB090620400':[48.382, 267183385.467578, 237.350, 61.1500, 0.0, 1.0, -1.0, 100, 80],
    'GRB081122520':[3.998, 249049693.211312, 339.100, 40.0000, 0.0, 1.0, -1.0, 100, 80],
    'GRB101113483':[22.528, 311340938.398062, 29.0800, 0.210000, 0.0, 1.0, -1.0, 100, 80],
    'GRB101227536':[17.408, 315147108.193000, 150.870, -49.4400, 0.0, 1.0, -1.0, 100, 80],
    'GRB100728095':[147.447, 301976252.610612, 88.7610, -15.2561, 0.0, 1.0, -1.0, 100, 80],
    'GRB081231140':[27.297, 252386462.933974, 208.600, -35.8000, 0.0, 1.0, -1.0, 100, 80],
    'GRB081207680':[104.448, 250359527.936378, 112.400, 70.5000, 0.0, 1.0, -1.0, 100, 80]    
    }

GRBS={'GRB080825593':[22.2, 241366429.105,233.9, -4.5, 0.0, 1.0, -1.0, 100, 80],
      'GRB090217206':[34.0, 256539404.560, 204.83, -8.42, 0.0, 1.0, -1.0, 100, 80],
      'GRB091003191':[50.0, 276237347.585, 251.51963, 36.62473, 0.0, 1.0, -1.0, 100, 80]
      }

GRBS={'GRB110529034':[2.0, 328322924.87,115.37, 72.8, 0.0, 0.1, -1.0, 100, 80]}

GRBS={'GRB110721200':[15,   332916465.76,   333.369, -38.973, 0.0, 0.1, -1.0, 100, 80]}
GRBS={'GRB110731465':[10.0, 333803371.9540, 280.504, -28.537, 0.0, 0.1, -1.0, 100, 40.0]} # This is a beautiful ARR so I can cut more



SSD = 0
submit   = 1
pipeline = 0

configFile = 'config/DefaultLLE.txt'
logfiles='logfiles_ez'

cmd0 = './mkdrm_ez.py -i %s -ra %s -dec %s -n %s -t %s -d %s -off %s -dt %s -r %s -zenith %s -theta %s'
if SSD:  cmd0 = './mkdrm_ez.py -i %s -ra %s -dec %s -n %s -t %s -d %s -off %s -dt %s -r %s -zenith %s -theta %s -ssd'

os.system('mkdir -p %s' % logfiles)

for k in sorted(GRBS.keys()):
    name = k
    duration = GRBS[k][0]
    trigger  = GRBS[k][1]
    ra       = GRBS[k][2]
    dec      = GRBS[k][3]
    offset   = GRBS[k][4]
    dt       = GRBS[k][5]
    roi      = GRBS[k][6]
    zenith   = GRBS[k][7]
    theta    = GRBS[k][8]
    
    cmd = cmd0 % (configFile,ra,dec,name,trigger,duration,offset,dt,roi,zenith,theta)
    logfile='%s/%s.log' % (logfiles,name)
    if SSD: logfile='%s/%s_SSD.log' % (logfiles,name)
    pipe='bsub -o %s -q long -J %s %s' %(logfile,name,cmd)
    if pipeline: cmd = pipe
    print cmd
        
    if submit==1: os.system(cmd)
    
    pass
